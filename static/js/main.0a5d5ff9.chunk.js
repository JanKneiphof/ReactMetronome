(this.webpackJsonpmetronome=this.webpackJsonpmetronome||[]).push([[0],{63:function(e,t,a){e.exports=a(86)},68:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),s=a.n(i),o=(a(68),a(121)),c=a(44),l=a(126),u=a(12),p=a(13),m=a(15),h=a(14),d=a(16),y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={loop:null},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"updateBeatLoop",value:function(e,t,a,n,r,i){var s=this.createBeatLoop(e,t,a);this.setState({loop:s}),"Quarter"===n?this.props.midiPlayback.current.startPlayLoop(s,r,1/(i*t)):this.props.midiPlayback.current.startPlayLoop(s,r,1/(4*t))}},{key:"updateTempo",value:function(e,t,a,n){"Quarter"===t?this.props.midiPlayback.current.startPlayLoop(this.state.loop,e,1/(a*n)):this.props.midiPlayback.current.startPlayLoop(this.state.loop,e,1/(4*n))}},{key:"createBeatLoop",value:function(e,t,a){if(!e)return[[[],[]]];for(var n=[[200],[]],r=[[210],[]],i=[[205],[]],s=[[],[]],o=[],c=0;c<e*t;c++){switch(a.get(c)){case 1:o[c]=r;break;case 2:o[c]=i;break;case 3:o[c]=n;break;case 0:o[c]=s;break;default:o[c]=s}}return o}},{key:"stopPlaying",value:function(){this.props.midiPlayback.current.stopPlayLoop()}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component),b=a(11),v=a.n(b),f=a(88),E=a(116),P=a(120),g=a(130),k=a(122),B=a(128),w=a(127),S={textTransform:"none"},j={margin:10},M={margin:10},O=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"addBpm",value:function(e){var t=parseInt(this.props.currentBpm,10)+parseInt(e,10);t<0||this.updateMetronomeBpm(t)}},{key:"updateMetronomeBpm",value:function(e){this.props.updateBpm(e)}},{key:"multiplyBpmBy",value:function(e){var t=Math.floor(parseInt(this.props.currentBpm,10)*parseFloat(e,10));t<0||this.updateMetronomeBpm(t)}},{key:"isPositiveRealNumber",value:function(e){return!(isNaN(e)||e<0)}},{key:"createAdornment",value:function(){return"Quarter"===this.props.tempoStyle?{startAdornment:r.a.createElement(E.a,{position:"start"},"\u2669 = ")}:{endAdornment:r.a.createElement(E.a,{position:"end"},"BPM ")}}},{key:"changeTempoStyle",value:function(e){var t=e.target.value;"Quarter"!==t&&"BPM"!==t||this.props.changeTempoStyle(t)}},{key:"handleInput",value:function(e){var t=e.target.value;this.isPositiveRealNumber(t)&&this.updateMetronomeBpm(t)}},{key:"render",value:function(){return r.a.createElement(P.a,{variant:"outlined"},r.a.createElement(c.a,{variant:"caption",style:M},"Tempo"),r.a.createElement(o.a,{container:!0,spacing:1,alignItems:"center",justify:"center",direction:"row"},r.a.createElement(o.a,{item:!0,style:j},r.a.createElement(g.a,{"aria-label":"Tempostyle",label:"Tempostyle",name:"Tempostyle",value:this.props.tempoStyle,onChange:this.changeTempoStyle.bind(this)},r.a.createElement(k.a,{value:"Quarter",control:r.a.createElement(B.a,null),label:"Quarter Notes per Minute"}),r.a.createElement(k.a,{value:"BPM",control:r.a.createElement(B.a,null),label:"Beats per Minute"}))),r.a.createElement(o.a,{item:!0,style:j},r.a.createElement(w.a,{InputProps:this.createAdornment(),id:"username",onChange:this.handleInput.bind(this),value:this.props.currentBpm,placeholder:"0",margin:"normal",label:"Enter Tempo",variant:"standard",autoFocus:!0})),r.a.createElement(o.a,{item:!0,style:j},r.a.createElement(o.a,{container:!0,alignItems:"center",justify:"center",spacing:1,direction:"row"},r.a.createElement(o.a,{item:!0},r.a.createElement(f.a,{"aria-label":"+10",onClick:this.addBpm.bind(this,"+10"),variant:"contained"},"+10")),r.a.createElement(o.a,{item:!0},r.a.createElement(f.a,{"aria-label":"x1.5",style:S,onClick:this.multiplyBpmBy.bind(this,"1.5"),variant:"contained"},"x1.5")),r.a.createElement(o.a,{item:!0},r.a.createElement(f.a,{"aria-label":"x2",style:S,onClick:this.multiplyBpmBy.bind(this,"2"),variant:"contained"},"x2.0"))),r.a.createElement(o.a,{container:!0,justify:"center",alignItems:"center",spacing:1,direction:"row"},r.a.createElement(o.a,{item:!0},r.a.createElement(f.a,{"aria-label":"-10",onClick:this.addBpm.bind(this,"-10"),variant:"contained"},"-10")),r.a.createElement(o.a,{item:!0},r.a.createElement(f.a,{"aria-label":"\xf71.5",onClick:this.multiplyBpmBy.bind(this,"0.75"),variant:"contained"},"\xf71.5")),r.a.createElement(o.a,{item:!0},r.a.createElement(f.a,{"aria-label":"\xf72",onClick:this.multiplyBpmBy.bind(this,"0.5"),variant:"contained"},"\xf72"))))))}}]),t}(n.Component),C=a(132),A=a(129),T=a(54),L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={counterRythm:1,basicPulse:1},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"updateCounterRythm",value:function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(isNaN(e.target.value)||parseInt(e)<=0)){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,v.a.awrap(this.setState({counterRythm:e.target.value}));case 6:case"end":return t.stop()}}),null,this)}},{key:"updateBasicPulse",value:function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(isNaN(e.target.value)||parseInt(e)<=0)){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,v.a.awrap(this.setState({basicPulse:e.target.value}));case 6:case"end":return t.stop()}}),null,this)}},{key:"createOptions",value:function(e){for(var t=[],a=1;a<e+1;a++)t.push(r.a.createElement("option",{key:a,value:a},a));return t}},{key:"playPolyrythm",value:function(){this.props.playPolyrythm(this.state.counterRythm,this.state.basicPulse)}},{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{variant:"outlined"},r.a.createElement(c.a,{style:M,variant:"caption"},"Polyrythm"),r.a.createElement(o.a,{container:!0,alignItems:"center",justify:"center",direction:"row"},r.a.createElement(o.a,{item:!0,style:j},r.a.createElement(C.a,null,r.a.createElement(A.a,{htmlFor:"Counterrythm-Input"},"Counterrythm"),r.a.createElement(T.a,{id:"Counterrythm-Input",onChange:function(t){return e.updateCounterRythm(t)}},this.createOptions(100)))),r.a.createElement(o.a,{item:!0,style:j},r.a.createElement(c.a,null," against ")),r.a.createElement(o.a,{item:!0,style:j},r.a.createElement(C.a,null,r.a.createElement(A.a,{htmlFor:"Basic-Pulse-Input"},"Basic\xa0Pulse"),r.a.createElement(T.a,{id:"Basic-Pulse-Input",onChange:function(t){return e.updateBasicPulse(t)}},this.createOptions(100)))),r.a.createElement(o.a,{item:!0,style:j},r.a.createElement(f.a,{variant:"contained","aria-label":"Play-Polyrythm",onClick:function(){return e.playPolyrythm()}},"Play Polyrythm"))))}}]),t}(n.Component),I=a(123),U=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"handleClick",value:function(e){this.props.changeSubdivision(e)}},{key:"createButtonGroups",value:function(e){for(var t=[],a=1;a<=e;a++){var n="\u2588".repeat(this.props.beatAccentuation.get(a-1));0===n.length&&(n="mute"),t.push(r.a.createElement(o.a,{key:a,item:!0},r.a.createElement(o.a,{container:!0,alignItems:"center",direction:"column"},r.a.createElement(o.a,{item:!0},r.a.createElement(c.a,null,n)),r.a.createElement(o.a,{item:!0},r.a.createElement(I.a,{key:"upTo"+a,size:"small"},r.a.createElement(f.a,{size:"small",onClick:this.props.changeSubdivision.bind(this,a),variant:"outlined",value:a,"aria-label":"Subdivision "+a},a))))))}return r.a.createElement(o.a,{container:!0,style:j,direction:"row"},t)}},{key:"render",value:function(){return r.a.createElement(P.a,{variant:"outlined"},r.a.createElement(c.a,{variant:"caption",style:M},"Beat Accents"),this.createButtonGroups(this.props.numberOfSubdivisions))}}]),t}(n.Component),x=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"isPositiveRealNumber",value:function(e){return!(isNaN(e)||e<0)}},{key:"updateBeatsPerMeasure",value:function(e){var t=e.target.value.trim();this.isPositiveRealNumber(t)&&this.props.updateTimeSignature(t,this.props.beatUnit)}},{key:"updateBeatUnit",value:function(e){var t=e.target.value.trim();this.isPositiveRealNumber(t)&&this.props.updateTimeSignature(this.props.beatsPerMeasure,t)}},{key:"render",value:function(){return r.a.createElement(P.a,{variant:"outlined"},r.a.createElement(c.a,{style:M,variant:"caption"},"Time Signature"),r.a.createElement(o.a,{container:!0,alignItems:"center",justify:"center",direction:"column"},r.a.createElement(o.a,{item:!0,style:j},r.a.createElement(w.a,{variant:"standard",id:"BeatsPerMeasureInput",value:this.props.beatsPerMeasure,onChange:this.updateBeatsPerMeasure.bind(this),label:"Beats per Measure"})),r.a.createElement(o.a,{item:!0,style:j},r.a.createElement(w.a,{variant:"standard",id:"BeatUnitInput",value:this.props.beatUnit,onChange:this.updateBeatUnit.bind(this),label:"Beat Unit"}))))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={beatUnitsPerMinute:a.props.defaultBpm,subdivisionsPerBeat:a.props.defaultSubdivisionsPerBeat,beatUnit:a.props.defaultBeatUnit,beatsPerMeasure:a.props.defaultBeatsPerMeasure,isPlaying:!1,beatAccentuation:a.props.defaultBeatAccentuation,tempoStyle:a.props.tempoStyle},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"updatePlayingLoop",value:function(){!0===this.state.isPlaying&&this.playLoop()}},{key:"updateTempo",value:function(){!0===this.state.isPlaying&&this.props.beatPlayer.current.updateTempo(this.state.beatUnitsPerMinute,this.state.tempoStyle,this.state.beatUnit,this.state.subdivisionsPerBeat)}},{key:"playLoop",value:function(){this.setState({isPlaying:!0}),this.props.beatPlayer.current.updateBeatLoop(this.state.beatsPerMeasure,this.state.subdivisionsPerBeat,this.state.beatAccentuation,this.state.tempoStyle,this.state.beatUnitsPerMinute,this.state.beatUnit)}},{key:"stopLoop",value:function(){this.setState({isPlaying:!1}),this.props.beatPlayer.current.stopPlaying()}},{key:"playPolyrythm",value:function(e,t){var a;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a=this.createPolyrythmAccents(e,t),n.next=3,v.a.awrap(this.setState({beatsPerMeasure:e*t,beatUnit:e*t,beatAccentuation:a}));case 3:this.playLoop();case 4:case"end":return n.stop()}}),null,this)}},{key:"createPolyrythmAccents",value:function(e,t){var a=new Map;a.set(0,3);for(var n=1;n<e*t;n++)n%e===0?a.set(n,2):n%t===0?a.set(n,1):a.set(n,0);return a}},{key:"changeAccentuation",value:function(e){var t,a;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.state.beatAccentuation.get(e-1)||0,a=new Map(this.state.beatAccentuation).set(e-1,(t+1)%4),n.next=4,v.a.awrap(this.setState({beatAccentuation:a}));case 4:this.updatePlayingLoop();case 5:case"end":return n.stop()}}),null,this)}},{key:"changeTempoStyle",value:function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(this.setState({tempoStyle:e}));case 2:this.updateTempo();case 3:case"end":return t.stop()}}),null,this)}},{key:"updateBpm",value:function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(this.setState({beatUnitsPerMinute:e}));case 2:this.updateTempo();case 3:case"end":return t.stop()}}),null,this)}},{key:"updateTimeSignature",value:function(e,t){var a,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:for(a=new Map(this.state.beatAccentuation),n=this.state.beatsPerMeasure;n<e;n++)a.set(parseInt(n),1);return r.next=4,v.a.awrap(this.setState({beatsPerMeasure:e,beatUnit:t,beatAccentuation:a}));case 4:this.updatePlayingLoop();case 5:case"end":return r.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",{style:{padding:20}}," ",r.a.createElement(o.a,{container:!0,spacing:2,alignItems:"center",justify:"center",direction:"column"},r.a.createElement(o.a,{item:!0},r.a.createElement(O,{defaultBpm:this.state.beatUnitsPerMinute,changeTempoStyle:this.changeTempoStyle.bind(this),updateBpm:this.updateBpm.bind(this),currentBpm:this.state.beatUnitsPerMinute,tempoStyle:this.state.tempoStyle})),r.a.createElement(o.a,{item:!0},r.a.createElement(x,{beatUnit:this.state.beatUnit,beatsPerMeasure:this.state.beatsPerMeasure,updateTimeSignature:this.updateTimeSignature.bind(this)})),r.a.createElement(o.a,{item:!0},r.a.createElement(o.a,{container:!0,justify:"center",spacing:2,column:"row"},r.a.createElement(o.a,{item:!0},r.a.createElement(f.a,{variant:"contained",onClick:this.playLoop.bind(this)},"Play sound")),r.a.createElement(o.a,{item:!0},r.a.createElement(f.a,{variant:"contained",onClick:this.stopLoop.bind(this)},"Stop sound")))),r.a.createElement(o.a,{item:!0},r.a.createElement(L,{playPolyrythm:this.playPolyrythm.bind(this)})),r.a.createElement(o.a,{item:!0},r.a.createElement(U,{changeSubdivision:this.changeAccentuation.bind(this),beatAccentuation:this.state.beatAccentuation,numberOfSubdivisions:this.state.beatsPerMeasure}))))}}]),t}(n.Component),R=a(55),Q=a.n(R),W=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"startPlayLoop",value:function(e,t,a){this.midiSounds.startPlayLoop(e,t,a)}},{key:"stopPlayLoop",value:function(){this.midiSounds.stopPlayLoop()}},{key:"componentDidMount",value:function(){this.midiSounds.setEchoLevel(0),this.midiSounds.setMasterVolume(1)}},{key:"render",value:function(){var e=this;return r.a.createElement(Q.a,{ref:function(t){return e.midiSounds=t},appElementName:"root",drums:[200,205,210]})}}]),t}(n.Component),F=a(124),G=a(125);var J=function(){return r.a.createElement(F.a,{position:"static",color:"primary"},r.a.createElement(G.a,null,r.a.createElement(c.a,{variant:"h6",color:"initial"},"Metronome")))};var z=function(){var e=r.a.createRef(),t=r.a.createRef();return r.a.createElement("div",{className:"App"},r.a.createElement(J,null),r.a.createElement(o.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(o.a,{item:!0},r.a.createElement(N,{defaultSubdivisionsPerBeat:"1",defaultBeatUnit:"4",defaultBeatsPerMeasure:"4",defaultBpm:"120",defaultBeatAccentuation:new Map([[0,3],[1,1],[2,1],[3,1]]),tempoStyle:"Quarter",beatPlayer:t})),r.a.createElement(o.a,{item:!0},r.a.createElement(y,{ref:t,midiPlayback:e})),r.a.createElement(o.a,{item:!0},r.a.createElement(W,{ref:e})),r.a.createElement(o.a,{item:!0},r.a.createElement(c.a,null,"Check out the Code on\xa0",r.a.createElement(l.a,{href:"https://github.com/JanKneiphof/ReactMetronome",target:"_blank",rel:"noreferrer"},"Github")))))},D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/ReactMetronome",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/ReactMetronome","/service-worker.js");D?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):K(t,e)}))}}()}},[[63,1,2]]]);
//# sourceMappingURL=main.0a5d5ff9.chunk.js.map